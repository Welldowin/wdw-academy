<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å - Well-Do-Win Academy</title>
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;500;700&display=swap" rel="stylesheet">
  <style>
    /* --- ‡πÅ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô HOT! --- */
    @keyframes blink-hot {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.3; transform: scale(1.05); }
    }
    .hot-badge {
      display: inline-block;
      background-color: #ff4d4f;
      color: #fff;
      font-size: 0.7rem;
      padding: 0.1rem 0.5rem;
      border-radius: 999px;
      margin-left: 0.4rem;
      font-weight: 700;
      animation: blink-hot 1s infinite;
    }

    /* ‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏•‡∏¥‡∏Å‡πÑ‡∏î‡πâ */
    .summary-line {
      cursor: pointer;
    }
    .summary-line:hover {
      text-decoration: underline;
    }

    body {
      margin: 0;
      font-family: 'Kanit', sans-serif;
      background-color: #fffdf5;
      color: #333;
    }

    header {
      background-color: #1E3D8F;
      color: white;
      text-align: center;
      padding-bottom: 2rem;
      position: relative;
    }

    .top-nav {
      display: flex;
      justify-content: center;
      gap: 2rem;
      padding: 1rem;
      background-color: #162e6d;
    }

    .top-nav a {
      color: white;
      text-decoration: none;
      font-weight: bold;
      font-size: 1rem;
    }

    .logo-center {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 1.5rem;
    }

    .logo-img {
      height: 90px;
      width: auto;
    }

    .school-name {
      margin-top: 0.5rem;
      font-size: 1.6rem;
      font-weight: 700;
    }

    /* ‡∏°‡∏∏‡∏°‡∏Ç‡∏ß‡∏≤‡∏ö‡∏ô: ‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å + ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö */
    .user-menu {
      position: absolute;
      top: 15px;
      right: 20px;
      display: flex;
      align-items: center;
      gap: 0.7rem;
      font-size: 0.9rem;
    }

    .user-name {
      background-color: rgba(0,0,0,0.15);
      padding: 0.35rem 0.7rem;
      border-radius: 999px;
    }

    .logout-btn {
      padding: 0.4rem 0.9rem;
      border-radius: 999px;
      border: 1px solid white;
      background-color: transparent;
      color: white;
      font-size: 0.85rem;
      font-weight: 500;
      cursor: pointer;
      text-decoration: none;
    }

    .logout-btn:hover {
      background-color: rgba(255,255,255,0.2);
    }

    /* ‡πÄ‡∏°‡∏ô‡∏π‡∏¢‡πà‡∏≠‡∏¢‡∏´‡∏ô‡πâ‡∏≤ member */
    .member-nav-wrapper {
      background-color: #fffdf5;
      border-bottom: 1px solid #e1d3b5;
    }

    .member-nav {
      max-width: 1080px;
      margin: 0 auto;
      padding: 0.6rem 1rem 0.7rem;
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      box-sizing: border-box;
    }

    .member-nav button {
      border: none;
      background-color: #f3e4c2;
      padding: 0.4rem 0.9rem;
      border-radius: 999px;
      font-size: 0.85rem;
      cursor: pointer;
    }

    .member-nav button:hover {
      background-color: #e9d39f;
    }

    .member-nav button.active {
      background-color: #D94C4C;
      color: white;
    }

    /* ‡πÇ‡∏Ñ‡∏£‡∏á‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤ */
    .main {
      max-width: 1080px;
      margin: 2rem auto;
      padding: 0 1rem 3rem;
      box-sizing: border-box;
    }

    .section-title {
      font-size: 1.4rem;
      color: #1E3D8F;
      margin-bottom: 0.8rem;
    }

    .grid-2 {
      display: grid;
      grid-template-columns: 2fr 1.1fr;
      gap: 1.2rem;
      margin-bottom: 1.5rem;
    }

    .grid-3 {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1.2rem;
      margin-top: 1rem;
    }

    .card {
      background-color: #fdf7e8;
      border-radius: 16px;
      padding: 1.3rem 1.2rem;
      box-shadow: 0 3px 8px rgba(0,0,0,0.05);
      box-sizing: border-box;
    }

    .card h3 {
      margin: 0 0 0.4rem;
      font-size: 1.2rem;
      color: #1E3D8F;
    }

    .card p {
      margin: 0.2rem 0;
      font-size: 0.95rem;
    }

    .badge {
      display: inline-block;
      background-color: #1E3D8F;
      color: white;
      font-size: 0.75rem;
      padding: 0.2rem 0.6rem;
      border-radius: 999px;
      margin-left: 0.4rem;
    }

    .course-filter-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0.8rem;
      margin-bottom: 0.8rem;
      flex-wrap: wrap;
    }

    .course-filter-row select {
      padding: 0.4rem 0.6rem;
      border-radius: 999px;
      border: 1px solid #d2c5aa;
      font-size: 0.85rem;
      background-color: #fff9ec;
    }

    .course-item {
      padding: 0.7rem 0.6rem;
      border-radius: 10px;
      background-color: #fff9ec;
      margin-bottom: 0.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0.6rem;
      font-size: 0.9rem;
    }

    .course-info {
      display: flex;
      flex-direction: column;
    }

    .course-name {
      font-weight: 600;
    }

    .course-meta {
      font-size: 0.8rem;
      color: #666;
    }

    .course-actions {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
    }

    .small-btn {
      padding: 0.25rem 0.7rem;
      border-radius: 999px;
      border: none;
      font-size: 0.78rem;
      cursor: pointer;
      white-space: nowrap;
    }

    .btn-primary {
      background-color: #D94C4C;
      color: white;
    }

    .btn-outline {
      background-color: transparent;
      border: 1px solid #D94C4C;
      color: #D94C4C;
    }

    .tag {
      display: inline-block;
      font-size: 0.75rem;
      padding: 0.15rem 0.55rem;
      border-radius: 999px;
      background-color: #ffe59e;
      margin-top: 0.2rem;
    }

    .hw-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
      margin-top: 0.5rem;
    }

    .hw-table th,
    .hw-table td {
      border-bottom: 1px solid #eadfca;
      padding: 0.45rem 0.4rem;
      text-align: left;
    }

    .hw-table th {
      font-size: 0.85rem;
      color: #555;
    }

    .status-pill {
      display: inline-block;
      padding: 0.18rem 0.6rem;
      border-radius: 999px;
      font-size: 0.75rem;
    }

    .status-pending {
      background-color: #ffe59e;
      color: #664d00;
    }

    .status-done {
      background-color: #c4f3c2;
      color: #255b26;
    }

    .ann-item {
      padding: 0.5rem 0;
      border-bottom: 1px dashed #e0cfac;
      font-size: 0.9rem;
    }

    .ann-item:last-child {
      border-bottom: none;
    }

    .ann-date {
      font-size: 0.78rem;
      color: #777;
    }

    .video-list {
      margin-top: 0.5rem;
      font-size: 0.9rem;
    }

    .video-item {
      padding: 0.4rem 0.3rem;
      border-radius: 10px;
      background-color: #fff9ec;
      margin-bottom: 0.4rem;
    }

    .video-item-title {
      font-weight: 600;
    }

    .video-item-meta {
      font-size: 0.78rem;
      color: #666;
    }

    .video-footer {
      margin-top: 0.6rem;
      font-size: 0.85rem;
      color: #555;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .link-text {
      font-size: 0.85rem;
      color: #D94C4C;
      text-decoration: none;
      font-weight: 500;
    }

    .profile-grid {
      display: grid;
      grid-template-columns: 1.3fr 1.7fr;
      gap: 1.2rem;
    }

    .profile-row {
      display: flex;
      justify-content: space-between;
      gap: 0.7rem;
      padding: 0.2rem 0;
      font-size: 0.9rem;
    }

    .profile-label {
      color: #555;
      min-width: 110px;
    }

    .profile-value {
      font-weight: 500;
    }

    /* ‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå */
    .profile-form label {
      display: block;
      font-size: 0.9rem;
      margin-bottom: 0.2rem;
      color: #444;
    }

    .profile-form input,
    .profile-form select {
      width: 100%;
      padding: 0.55rem 0.7rem;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 0.9rem;
      margin-bottom: 0.8rem;
      box-sizing: border-box;
      background-color: #fff;
    }

    .primary-btn {
      padding: 0.6rem 1.4rem;
      border-radius: 999px;
      border: none;
      background-color: #D94C4C;
      color: white;
      font-size: 0.95rem;
      font-weight: 500;
      cursor: pointer;
    }

    .primary-btn:hover {
      opacity: 0.95;
    }

    footer {
      background-color: #1E3D8F;
      color: white;
      text-align: center;
      padding: 1rem;
      font-size: 0.9rem;
    }

    @media (max-width: 880px) {
      .grid-2 {
        grid-template-columns: 1fr;
      }
      .grid-3 {
        grid-template-columns: 1fr;
      }
      .profile-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>

  <header>
    <!-- ‡πÄ‡∏°‡∏ô‡∏π‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å -->
    <div class="user-menu">
      <div class="user-name">
        üëã ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ, <span id="userNameDisplay">‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</span>
      </div>
      <a href="#" class="logout-btn" id="logoutBtn">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a>
    </div>

    <!-- ‡πÄ‡∏°‡∏ô‡∏π‡∏ô‡∏≥‡∏ó‡∏≤‡∏á -->
    <nav class="top-nav">
      <a href="index.html">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a>
      <a href="courses.html">‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</a>
      <a href="#">‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</a>
      <a href="#">‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</a>
    </nav>

    <!-- ‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡πÅ‡∏•‡∏∞‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô -->
    <div class="logo-center">
      <img src="logo.png" alt="‡πÇ‡∏•‡πÇ‡∏Å‡πâ WDW" class="logo-img" />
      <h1 class="school-name">‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å Well-Do-Win Academy</h1>
    </div>
  </header>

  <!-- ‡πÄ‡∏°‡∏ô‡∏π‡∏¢‡πà‡∏≠‡∏¢‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ member -->
  <div class="member-nav-wrapper">
    <div class="member-nav">
      <button class="member-tab-btn active" data-target="overview">‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°</button>
      <button class="member-tab-btn" data-target="courses">‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</button>
      <button class="member-tab-btn" data-target="videos">‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á</button>
      <button class="member-tab-btn" data-target="homework">‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô</button>
      <button class="member-tab-btn" data-target="profile">‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</button>
    </div>
  </div>

  <main class="main">

    <!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå (‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏Å‡∏£‡∏≠‡∏Å‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö) -->
    <section class="card" id="profileFormSection" style="margin-bottom:1.5rem; display:none;">
      <h2 class="section-title" style="margin-top:0;">‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</h2>
      <p style="font-size:0.9rem;color:#555;margin-bottom:1rem;">
        ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
      </p>

      <form id="profileForm" class="profile-form">
        <label for="pf_firstname">‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</label>
        <input type="text" id="pf_firstname" required placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏£‡∏¥‡∏á">

        <label for="pf_lastname">‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</label>
        <input type="text" id="pf_lastname" required placeholder="‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•">

        <label for="pf_nickname">‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô</label>
        <input type="text" id="pf_nickname" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô">

        <label for="pf_level">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô / ‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</label>
        <select id="pf_level" required>
          <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô --</option>
	<option value="‡∏°.1">‡∏°.1</option>
	<option value="‡∏°.2">‡∏°.2</option>
          <option value="‡∏°.3">‡∏°.3</option>
          <option value="‡∏°.4">‡∏°.4</option>
          <option value="‡∏°.5">‡∏°.5</option>
          <option value="‡∏°.6">‡∏°.6</option>
        </select>

        <label for="pf_school">‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</label>
        <input type="text" id="pf_school" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏¢‡∏ô">

        <label for="pf_phone">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</label>
        <input type="tel" id="pf_phone" required placeholder="‡πÄ‡∏ä‡πà‡∏ô 08x-xxx-xxxx">

        <label for="pf_parent_phone">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á</label>
        <input type="tel" id="pf_parent_phone" placeholder="‡πÄ‡∏ä‡πà‡∏ô 08x-xxx-xxxx">

        <div style="margin-top:0.8rem;">
          <button type="submit" class="primary-btn">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</button>
        </div>
      </form>
    </section>

    <!-- ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏à‡∏£‡∏¥‡∏á (‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏•‡πá‡∏≠‡∏Å‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏Å‡∏£‡∏≠‡∏Å‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå) -->
    <div id="dashboardContent">

      <!-- ‡πÅ‡∏ñ‡∏ß‡∏ö‡∏ô: ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö + ‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ -->
      <div class="grid-2" id="overview">
        <section class="card">
          <h3>‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤ üéì</h3>
          <p>
            <strong id="welcomeStudentName">‡∏ô‡πâ‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á</strong>
            | <span id="welcomeLevel">‡∏°.5 ‡∏™‡∏≤‡∏¢‡∏ß‡∏¥‡∏ó‡∏¢‡πå ‚Äì ‡∏Ñ‡∏ì‡∏¥‡∏ï</span>
          </p>
          <p>‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏™‡πà‡∏á‡∏≠‡∏¢‡∏π‡πà ‡∏•‡∏≠‡∏á‡πÄ‡∏ä‡πá‡∏Ñ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö</p>
          <p style="margin-top:0.7rem;font-size:0.85rem;color:#555;">
            üëâ ‡∏´‡∏≤‡∏Å‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Ñ‡∏£‡∏π / ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà Line: @welldowin
          </p>

          <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ Dashboard + ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô -->
          <div style="margin-top:1rem;">
            <button type="button" class="primary-btn" id="dashboardBtn" disabled>
              ‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ Dashboard (‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô & ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠)
            </button>
            <div id="dashboardLockMessage" style="font-size:0.85rem;color:#555;margin-top:0.3rem;">
              ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö...
            </div>
          </div>
        </section>

        <section class="card" id="todaySummary">
          <h3>‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h3>

          <p class="summary-line" id="summaryCourses">
            üìö ‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏ó‡∏µ‡πà‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô:
            <strong><span id="coursesCount">0</span> ‡∏Ñ‡∏≠‡∏£‡πå‡∏™</strong>
          </p>

          <p class="summary-line" id="summaryHomework">
            üìù ‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡πÉ‡∏ô‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ô‡∏µ‡πâ:
            <strong><span id="homeworkCount">0</span> ‡∏ä‡∏¥‡πâ‡∏ô</strong>
          </p>

          <p class="summary-line" id="summaryVideos">
            üé• ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ô‡∏µ‡πâ:
            <strong><span id="videosCount">0</span> ‡∏Ñ‡∏•‡∏¥‡∏õ</strong>
          </p>

          <p class="tag">
            * ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏à‡∏∞‡∏î‡∏∂‡∏á‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏≠‡∏£‡πå‡∏™ / ‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô / ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
          </p>
        </section>

      </div>

      <!-- ‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô -->
      <section style="margin-top:1.5rem;" id="courses">
        <h2 class="section-title">‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</h2>
        <div class="card">

          <div class="course-filter-row">
            <p style="margin:0;font-size:0.9rem;">
              ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏î‡∏π‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏ï‡∏≤‡∏°‡∏ß‡∏¥‡∏ä‡∏≤:
            </p>
            <select>
              <option>‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
              <option>‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå</option>
              <option>‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</option>
              <option>‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏ï‡∏¥‡∏ß‡∏™‡∏≠‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ ‡∏°‡∏´‡∏≤‡∏•‡∏±‡∏¢</option>
            </select>
          </div>

          <!-- ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏£‡∏ì‡∏µ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô -->
          <div id="noCoursesMessage" style="display:none; margin-top:0.5rem; font-size:0.9rem; color:#777;">
            ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô ‡πÑ‡∏õ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏Å‡∏±‡∏ô‡πÄ‡∏•‡∏¢! ‚ú®
          </div>

          <!-- ‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ (‡∏à‡∏∞‡πÇ‡∏ä‡∏ß‡πå‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏≠‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≠‡∏£‡πå‡∏™) -->
          <div id="recommendedCourses" style="display:none; margin-top:0.8rem;">
            <p style="margin:0 0 0.5rem;font-size:0.9rem;">
              ‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡πâ‡∏≠‡∏á ‡πÜ:
            </p>

            <div class="course-item recommend-course">
              <div class="course-info">
                <span class="course-name">
                  ‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå ‡∏°.4 ‡πÄ‡∏ó‡∏≠‡∏° 2 ‚Äì ‡∏á‡∏≤‡∏ô ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô ‡πÅ‡∏•‡∏∞‡πÇ‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡∏±‡∏°
                  <span class="hot-badge">HOT!</span>
                </span>
                <span class="course-meta">‡πÄ‡∏ó‡∏≠‡∏° 2 ‡∏™‡∏≤‡∏¢‡∏ß‡∏¥‡∏ó‡∏¢‡πå ‚Äì ‡∏¢‡∏≠‡∏î‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î</span>
              </div>
              <div class="course-actions">
  <a
    class="small-btn btn-primary"
    href="checkout.html?course=m4-term2-chumpae">
    ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏ô‡∏µ‡πâ
  </a>
  <a
    class="small-btn btn-outline"
    href="courses.html?course=m4-term2-chumpae">
    ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
  </a>
</div>

            </div>

            <div class="course-item recommend-course">
              <div class="course-info">
                <span class="course-name">
                  ‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå ‡∏°.5 ‡πÄ‡∏ó‡∏≠‡∏° 2 ‚Äì ‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏™‡∏ñ‡∏¥‡∏ï & ‡∏™‡∏ô‡∏≤‡∏°‡πÑ‡∏ü‡∏ü‡πâ‡∏≤
                  <span class="hot-badge">HOT!</span>
                </span>
                <span class="course-meta">‡πÄ‡∏ó‡∏≠‡∏° 2 ‡∏™‡∏≤‡∏¢‡∏ß‡∏¥‡∏ó‡∏¢‡πå ‚Äì ‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°‡∏Ç‡∏≠‡∏á Well-Do-Win</span>
              </div>
              <div class="course-actions">
  <a
    class="small-btn btn-primary"
    href="checkout.html?course=m5-term2-chumpae">
    ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏ô‡∏µ‡πâ
  </a>
  <a
    class="small-btn btn-outline"
    href="courses.html?course=m5-term2-chumpae">
    ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
  </a>
</div>

            </div>

          </div>

          <!-- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏ó‡∏µ‡πà‡∏ô‡πâ‡∏≠‡∏á‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏à‡∏£‡∏¥‡∏á -->
          <div id="myCoursesList">
            <!-- ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏ï‡∏¥‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Apps Script -->
          </div>

          <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏î‡∏π‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î -->
          <div style="margin-top:1rem; text-align:right;">
            <a href="courses.html" class="primary-btn" style="text-decoration:none; display:inline-block;">
              ‡∏î‡∏π‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
            </a>
          </div>

        </div>
      </section>

      

      <!-- ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏® -->
      <section style="margin-top:1.5rem;">
        <h2 class="section-title">‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏à‡∏≤‡∏Å Well-Do-Win üì¢</h2>
        <div class="card">
          <div class="ann-item">
            <div><strong>‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå ‡∏°.5 ‡∏ß‡∏±‡∏ô‡∏®‡∏∏‡∏Å‡∏£‡πå</strong></div>
            <div class="ann-date">‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÄ‡∏°‡∏∑‡πà‡∏≠: 23 ‡∏û.‡∏¢. 2025</div>
            <div>‡∏¢‡πâ‡∏≤‡∏¢‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏à‡∏≤‡∏Å 17.30‚Äì19.30 ‡πÄ‡∏õ‡πá‡∏ô 18.00‚Äì20.00 ‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß 2 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</div>
          </div>
          <div class="ann-item">
            <div><strong>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏ß‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏™‡∏≠‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ ‡∏°‡∏´‡∏≤‡∏•‡∏±‡∏¢ ‡∏ß‡∏±‡∏ô‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå‡πÄ‡∏ä‡πâ‡∏≤</strong></div>
            <div class="ann-date">‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÄ‡∏°‡∏∑‡πà‡∏≠: 21 ‡∏û.‡∏¢. 2025</div>
            <div>‡πÄ‡∏õ‡∏¥‡∏î‡∏Ñ‡∏•‡∏≤‡∏™‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡πâ‡∏≠‡∏á ‡∏°.6 ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏ß‡πÄ‡∏ô‡πâ‡∏ô‡πÇ‡∏à‡∏ó‡∏¢‡πå Physics 9 ‡∏ß‡∏¥‡∏ä‡∏≤‡∏™‡∏≤‡∏°‡∏±‡∏ç</div>
          </div>
          <div class="ann-item">
            <div><strong>‡∏ó‡∏î‡∏•‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà</strong></div>
            <div class="ann-date">‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÄ‡∏°‡∏∑‡πà‡∏≠: 20 ‡∏û.‡∏¢. 2025</div>
            <div>‡∏´‡∏≤‡∏Å‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ‡πÅ‡∏à‡πâ‡∏á‡∏Ñ‡∏£‡∏π‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà Line: @welldowin</div>
          </div>
        </div>
      </section>

      <!-- ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô -->
      <section style="margin-top:1.5rem;" id="profile">
        <h2 class="section-title">‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô üë§</h2>
        <div class="card profile-grid">
          <div>
            <h3>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h3>
            <div class="profile-row">
              <div class="profile-label">‡∏ä‡∏∑‡πà‡∏≠ - ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</div>
              <div class="profile-value" id="displayStudentName">‡∏ô‡πâ‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á ‡∏ï‡∏±‡∏ß‡∏à‡∏£‡∏¥‡∏á</div>
            </div>
            <div class="profile-row">
              <div class="profile-label">‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô</div>
              <div class="profile-value" id="displayNickname">-</div>
            </div>
            <div class="profile-row">
              <div class="profile-label">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô</div>
              <div class="profile-value" id="displayLevel">‡∏°.5 ‡∏™‡∏≤‡∏¢‡∏ß‡∏¥‡∏ó‡∏¢‡πå ‚Äì ‡∏Ñ‡∏ì‡∏¥‡∏ï</div>
            </div>
            <div class="profile-row">
              <div class="profile-label">‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</div>
              <div class="profile-value" id="displaySchool">‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô</div>
            </div>
            <div class="profile-row">
              <div class="profile-label">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£</div>
              <div class="profile-value" id="displayPhone">08x-xxx-xxxx</div>
            </div>
            <div class="profile-row">
              <div class="profile-label">‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á</div>
              <div class="profile-value" id="displayParentPhone">‡∏Ñ‡∏∏‡∏ì‡∏û‡πà‡∏≠ / ‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏°‡πà‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á</div>
            </div>
          </div>
          <div>
            <h3>‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h3>
            <div class="profile-row">
              <div class="profile-label">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</div>
              <div class="profile-value" id="profileEmail">student@example.com</div>
            </div>
            <div class="profile-row">
              <div class="profile-label">‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Å‡∏±‡∏ö LINE</div>
              <div class="profile-value">-</div>
            </div>
            <div class="profile-row">
              <div class="profile-label">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</div>
              <div class="profile-value" id="paymentStatusText">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞...</div>
            </div>
            <p style="font-size:0.85rem;color:#555;margin-top:0.8rem;">
              ‡∏´‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î ‡∏´‡∏£‡∏∑‡∏≠ ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£ / ‡∏≠‡∏µ‡πÄ‡∏°‡∏• / ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ LINE  
              ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÅ‡∏à‡πâ‡∏á‡∏Ñ‡∏£‡∏π‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏ú‡πà‡∏≤‡∏ô Line: @welldowin
            </p>
            <button type="button" class="primary-btn" id="editProfileBtn" style="margin-top:0.6rem;">
              ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå
            </button>
          </div>
        </div>
      </section>

    </div><!-- /dashboardContent -->

  </main>

  <footer>
    ¬© 2025 ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Å‡∏ß‡∏î‡∏ß‡∏¥‡∏ä‡∏≤‡πÄ‡∏ß‡∏•‡∏î‡∏π‡∏ß‡∏¥‡∏ô - ‡πÄ‡∏õ‡πá‡∏ô‡πÉ‡∏´‡πâ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Å‡∏ß‡∏î‡∏ß‡∏¥‡∏ä‡∏≤
  </footer>

 <script>
  // ---------- 0) ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ URL Apps Script ----------
  const PROFILE_API_URL = 'https://script.google.com/macros/s/AKfycbzgYdGzCy_g5SiIT1WBYUBjFtkA_zZhN_WTlyolp9ziE8mhFhVT85CHcZF5YHM2s4NQ/exec';

  function escapeHtml(str) {
    if (!str) return '';
    return String(str)
      .replace(/&/g, '&amp;')
      .replace(/</g, '&lt;')
      .replace(/>/g, '&gt;')
      .replace(/"/g, '&quot;')
      .replace(/'/g, '&#39;');
  }

  // ---------- CONFIG: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏£‡πå‡∏™ + ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô/‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠ ‡∏ï‡πà‡∏≠‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå ----------
  const COURSE_CONFIG = {
    'm4-term2-chumpae': {
      name: '‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡πÄ‡∏ó‡∏≠‡∏° 2 ‚Äì ‡∏°.4 ‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå/‡πÄ‡∏Ñ‡∏°‡∏µ (‡∏ä‡∏∏‡∏°‡πÅ‡∏û)',
      schedule: '‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏ô 22 ‡∏û.‡∏¢. 68 ‚Äì ‡∏ó‡∏∏‡∏Å‡πÄ‡∏™‡∏≤‡∏£‡πå 09.00‚Äì10.30 (‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå), 13.00‚Äì14.30 (‡πÄ‡∏Ñ‡∏°‡∏µ)',
      weeklyHomework: 2,
      weeklyVideos: 2
    },
    'm5-term2-chumpae': {
      name: '‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡πÄ‡∏ó‡∏≠‡∏° 2 ‚Äì ‡∏°.5 ‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå/‡πÄ‡∏Ñ‡∏°‡∏µ (‡∏ä‡∏∏‡∏°‡πÅ‡∏û)',
      schedule: '‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏ô 22 ‡∏û.‡∏¢. 68 ‚Äì ‡∏ó‡∏∏‡∏Å‡πÄ‡∏™‡∏≤‡∏£‡πå 10.45‚Äì12.15 (‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå), 14.30‚Äì16.00 (‡πÄ‡∏Ñ‡∏°‡∏µ)',
      weeklyHomework: 2,
      weeklyVideos: 2
    },
    'term2-phy-chem-chumpae': {
      name: '‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡πÄ‡∏ó‡∏≠‡∏° 2 ‚Äì ‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå/‡πÄ‡∏Ñ‡∏°‡∏µ (‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏£‡∏ß‡∏°‡∏ä‡∏∏‡∏°‡πÅ‡∏û)',
      schedule: '40 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á ‡∏°‡∏µ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£/‡∏û‡∏§‡∏´‡∏±‡∏™ ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏™‡∏≤‡∏£‡πå',
      weeklyHomework: 3,
      weeklyVideos: 3
    },
    'online-tgat-tpat-alevel': {
      name: '‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå ‚Äì TGAT / TPAT3 / A-Level',
      schedule: '‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô 18 ‡∏ä‡∏°. ‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ ‡∏à‡∏ô‡∏ñ‡∏∂‡∏á‡∏™‡∏≠‡∏ö 14 ‡∏°‡∏µ.‡∏Ñ. 69',
      weeklyHomework: 1,
      weeklyVideos: 1
    },
    'online-netsat': {
      name: '‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå ‚Äì NETSAT ‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå/‡πÄ‡∏Ñ‡∏°‡∏µ',
      schedule: '‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô 18 ‡∏ä‡∏°. ‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ ‡∏à‡∏ô‡∏ñ‡∏∂‡∏á‡∏™‡∏≠‡∏ö 7 ‡∏Å.‡∏û. 69',
      weeklyHomework: 1,
      weeklyVideos: 1
    }
  };

  // ---------- 1) ‡πÄ‡∏ä‡πá‡∏Å‡∏Å‡∏≤‡∏£‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏à‡∏≤‡∏Å localStorage ----------
  const userId    = localStorage.getItem('userId');
  const userEmail = localStorage.getItem('userEmail') || '';

  if (!userId) {
    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å');
    window.location.href = 'login.html';
  }

  const userNameDisplay = document.getElementById('userNameDisplay');
  const profileEmail    = document.getElementById('profileEmail');

  if (userEmail) {
    if (userNameDisplay) userNameDisplay.textContent = userEmail;
    if (profileEmail)    profileEmail.textContent    = userEmail;
  }

  const logoutBtn = document.getElementById('logoutBtn');
  if (logoutBtn) {
    logoutBtn.addEventListener('click', (e) => {
      e.preventDefault();
      localStorage.removeItem('userId');
      localStorage.removeItem('userEmail');
      window.location.href = 'index.html';
    });
  }

  // ---------- 2) ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏Å‡∏£‡∏≠‡∏Å‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏Å‡πà‡∏≠‡∏ô ----------
  const profileFormSection = document.getElementById('profileFormSection');
  const dashboardContent   = document.getElementById('dashboardContent');

  const profileCompletedKey = 'profileCompleted_' + (userId || userEmail || 'unknown');
  const profileCompleted    = localStorage.getItem(profileCompletedKey);

  function lockDashboard() {
    if (!profileFormSection || !dashboardContent) return;
    profileFormSection.style.display = 'block';
    dashboardContent.style.opacity   = '0.4';
    dashboardContent.style.pointerEvents = 'none';
  }

  function unlockDashboard() {
    if (!profileFormSection || !dashboardContent) return;
    profileFormSection.style.display = 'none';
    dashboardContent.style.opacity   = '1';
    dashboardContent.style.pointerEvents = 'auto';
  }

  if (profileCompleted === 'true') {
    unlockDashboard();
  } else {
    lockDashboard();
  }

  // ---------- helper: profile ‡πÉ‡∏ô localStorage ----------
  function saveProfileToLocal(data) {
    localStorage.setItem('studentProfile', JSON.stringify(data));
  }

  function loadProfileFromLocal() {
    const raw = localStorage.getItem('studentProfile');
    if (!raw) return;

    let data;
    try {
      data = JSON.parse(raw);
    } catch (e) {
      console.error('Parse studentProfile error', e);
      return;
    }

    const fullName = (data.firstName || '') + (data.lastName ? ' ' + data.lastName : '');
    const nickname = data.nickname || '';

    const displayStudentName = document.getElementById('displayStudentName');
    const displayNickname    = document.getElementById('displayNickname');
    const displayLevel       = document.getElementById('displayLevel');
    const displaySchool      = document.getElementById('displaySchool');
    const displayPhone       = document.getElementById('displayPhone');
    const displayParentPhone = document.getElementById('displayParentPhone');
    const welcomeStudentName = document.getElementById('welcomeStudentName');
    const welcomeLevel       = document.getElementById('welcomeLevel');

    if (displayStudentName) displayStudentName.textContent = fullName || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏';
    if (displayNickname)    displayNickname.textContent    = nickname || '-';
    if (displayLevel)       displayLevel.textContent       = data.level || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏';
    if (displaySchool)      displaySchool.textContent      = data.school || '-';
    if (displayPhone)       displayPhone.textContent       = data.phone || '-';
    if (displayParentPhone) displayParentPhone.textContent = data.parentPhone || '-';
    if (welcomeStudentName) welcomeStudentName.textContent = fullName || '‡∏ô‡πâ‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô';
    if (welcomeLevel)       welcomeLevel.textContent       = data.level || '';

    if (userNameDisplay) {
      if (fullName) {
        userNameDisplay.textContent = fullName;
      } else if (userEmail) {
        userNameDisplay.textContent = userEmail;
      }
    }
  }

  // ---------- 3) ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏õ Apps Script ----------
  const profileForm = document.getElementById('profileForm');
  if (profileForm) {
    profileForm.addEventListener('submit', async (e) => {
      e.preventDefault();

      const payload = {
        userId:      userId,
        email:       userEmail,
        firstName:   document.getElementById('pf_firstname').value.trim(),
        lastName:    document.getElementById('pf_lastname').value.trim(),
        nickname:    document.getElementById('pf_nickname').value.trim(),
        level:       document.getElementById('pf_level').value,
        school:      document.getElementById('pf_school').value.trim(),
        phone:       document.getElementById('pf_phone').value.trim(),
        parentPhone: document.getElementById('pf_parent_phone').value.trim()
      };

      if (!payload.firstName || !payload.lastName || !payload.level || !payload.phone) {
        alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô');
        return;
      }

      const params = new URLSearchParams(payload).toString();
      const url    = `${PROFILE_API_URL}?${params}`;

      try {
        const res  = await fetch(url);
        const text = await res.text();
        console.log('Profile API response:', text);

        if (text.trim().startsWith('OK')) {
          alert('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß ‚úÖ');
          localStorage.setItem(profileCompletedKey, 'true');
          saveProfileToLocal(payload);
          loadProfileFromLocal();
          unlockDashboard();
        } else {
          alert('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: ' + text);
        }
      } catch (err) {
        console.error(err);
        alert('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (network error): ' + err.message);
      }
    });
  }

  // ---------- 4) ‡πÄ‡∏°‡∏ô‡∏π‡πÅ‡∏ó‡πá‡∏ö ----------
  const buttons = document.querySelectorAll('.member-tab-btn');
  const sections = {
    overview: document.getElementById('overview'),
    courses:  document.getElementById('courses'),
    videos:   document.getElementById('videos'),
    homework: document.getElementById('homework'),
    profile:  document.getElementById('profile')
  };

  buttons.forEach(btn => {
    btn.addEventListener('click', () => {
      const target  = btn.getAttribute('data-target');
      const section = sections[target];
      if (section) {
        window.scrollTo({
          top: section.offsetTop - 80,
          behavior: 'smooth'
        });
      }
      buttons.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
    });
  });

  window.addEventListener('scroll', () => {
    const scrollPos = window.scrollY + 150;
    Object.entries(sections).forEach(([key, section]) => {
      if (!section) return;
      const top    = section.offsetTop;
      const bottom = top + section.offsetHeight;
      if (scrollPos >= top && scrollPos < bottom) {
        buttons.forEach(b => {
          if (b.getAttribute('data-target') === key) {
            b.classList.add('active');
          } else {
            b.classList.remove('active');
          }
        });
      }
    });
  });

  // ---------- 5) ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏™‡∏£‡∏∏‡∏õ ----------
  function updateSummaryCounts(courses) {
    const coursesCountEl  = document.getElementById('coursesCount');
    const homeworkCountEl = document.getElementById('homeworkCount');
    const videosCountEl   = document.getElementById('videosCount');

    if (!Array.isArray(courses) || courses.length === 0) {
      if (coursesCountEl)  coursesCountEl.textContent  = '0';
      if (homeworkCountEl) homeworkCountEl.textContent = '0';
      if (videosCountEl)   videosCountEl.textContent   = '0';
      return;
    }

    const courseCount = courses.length;
    let totalHw  = 0;
    let totalVid = 0;

    courses.forEach(c => {
      const conf = COURSE_CONFIG[c.courseId] || {};
      totalHw  += conf.weeklyHomework || 0;
      totalVid += conf.weeklyVideos   || 0;
    });

    if (coursesCountEl)  coursesCountEl.textContent  = String(courseCount);
    if (homeworkCountEl) homeworkCountEl.textContent = String(totalHw);
    if (videosCountEl)   videosCountEl.textContent   = String(totalVid);
  }

  // ---------- 6) UI ‡∏Ñ‡∏≠‡∏£‡πå‡∏™ (‡πÑ‡∏°‡πà‡∏°‡∏µ/‡∏°‡∏µ) ----------
  function updateCoursesUI() {
    const myCoursesList = document.getElementById('myCoursesList');
    const noCoursesMsg  = document.getElementById('noCoursesMessage');
    const recommended   = document.getElementById('recommendedCourses');

    let registeredCount = 0;
    if (myCoursesList) {
      registeredCount = myCoursesList.querySelectorAll('.course-item').length;
    }

    if (registeredCount === 0) {
      if (myCoursesList) myCoursesList.style.display = 'none';
      if (noCoursesMsg)  noCoursesMsg.style.display  = 'block';
      if (recommended)   recommended.style.display   = 'block';
    } else {
      if (myCoursesList) myCoursesList.style.display = 'block';
      if (noCoursesMsg)  noCoursesMsg.style.display  = 'none';
      if (recommended)   recommended.style.display   = 'none';
    }
  }

  // ---------- 7) ‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á section ----------
  function scrollToSection(key) {
    const section = sections[key];
    if (!section) return;
    window.scrollTo({
      top: section.offsetTop - 80,
      behavior: 'smooth'
    });
  }

  const summaryCourses  = document.getElementById('summaryCourses');
  const summaryHomework = document.getElementById('summaryHomework');
  const summaryVideos   = document.getElementById('summaryVideos');

  if (summaryCourses)  summaryCourses.addEventListener('click', () => scrollToSection('courses'));
  if (summaryHomework) summaryHomework.addEventListener('click', () => scrollToSection('homework'));
  if (summaryVideos)   summaryVideos.addEventListener('click', () => scrollToSection('videos'));

  // ---------- 8) ‡∏õ‡∏∏‡πà‡∏° "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå" ----------
  const editProfileBtn = document.getElementById('editProfileBtn');
  if (editProfileBtn) {
    editProfileBtn.addEventListener('click', () => {
      const raw = localStorage.getItem('studentProfile');
      if (raw) {
        try {
          const data = JSON.parse(raw);
          document.getElementById('pf_firstname').value    = data.firstName   || '';
          document.getElementById('pf_lastname').value     = data.lastName    || '';
          document.getElementById('pf_nickname').value     = data.nickname    || '';
          document.getElementById('pf_level').value        = data.level       || '';
          document.getElementById('pf_school').value       = data.school      || '';
          document.getElementById('pf_phone').value        = data.phone       || '';
          document.getElementById('pf_parent_phone').value = data.parentPhone || '';
        } catch (e) {
          console.error('Cannot preload profile form', e);
        }
      }
      profileFormSection.style.display = 'block';
      window.scrollTo({
        top: profileFormSection.offsetTop - 80,
        behavior: 'smooth'
      });
    });
  }

  // ---------- 9) ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô ‡∏à‡∏≤‡∏Å enrollcourse ----------
  function renderCourses(courses) {
    const myCoursesList = document.getElementById('myCoursesList');
    if (!myCoursesList) return;

    myCoursesList.innerHTML = '';

    if (!Array.isArray(courses) || courses.length === 0) {
      myCoursesList.innerHTML =
        '<p style="font-size:0.9rem; color:#777;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</p>';
      updateCoursesUI();
      updateSummaryCounts([]);
      return;
    }

    courses.forEach(course => {
      const courseId   = course.courseId || course.id || '';
      const conf       = COURSE_CONFIG[courseId] || {};
      const courseName = course.courseName || conf.name || courseId || '';
      const schedule   = course.schedule   || conf.schedule || '';
      const statusRaw  = course.status     || '';
      const statusUpper = String(statusRaw).toUpperCase();
      const isPaid      = (statusUpper === 'PAID' || statusUpper === '‡∏ä‡∏≥‡∏£‡∏∞‡πÅ‡∏•‡πâ‡∏ß');

      const statusClass = isPaid ? 'status-done' : 'status-pending';
      const statusText  = isPaid ? '‡∏ä‡∏≥‡∏£‡∏∞‡πÅ‡∏•‡πâ‡∏ß' : (statusRaw || '‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞');

      const div = document.createElement('div');
      div.className = 'course-item';
      div.innerHTML = `
        <div class="course-info">
          <span class="course-name">${escapeHtml(courseName)}</span>
          <span class="course-meta">${escapeHtml(schedule)}</span>
          <span class="tag ${statusClass}">${statusText}</span>
        </div>
        <div class="course-actions">
          ${isPaid ? `
            <button class="small-btn btn-primary" onclick="goToDashboard('${courseId}')">
              ‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô / Dashboard
            </button>
          ` : ''}
        </div>
      `;
      myCoursesList.appendChild(div);
    });

    updateCoursesUI();
    updateSummaryCounts(courses);
  }

  function goToDashboard(courseId) {
    if (!courseId) {
      window.location.href = 'dashboard.html';
      return;
    }
    window.location.href = 'dashboard.html?course=' + encodeURIComponent(courseId);
  }

  // ---------- 10) ‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡πÉ‡∏ô "‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ" ----------
  function updateCourseSummary(courses) {
    const summaryEl = document.getElementById('summaryCourses');
    if (!summaryEl) return;

    if (!Array.isArray(courses) || courses.length === 0) {
      summaryEl.innerHTML =
        'üìö ‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏ó‡∏µ‡πà‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô: <strong>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡πÉ‡∏î</strong>';
      return;
    }

    const itemsHtml = courses.slice(0, 3).map(c => {
      const conf = COURSE_CONFIG[c.courseId] || {};
      const name = escapeHtml(c.courseName || conf.name || c.courseId || '');
      const schedule = escapeHtml(conf.schedule || c.schedule || '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô');
      return `
        <li style="margin-bottom:0.25rem;">
          <strong>${name}</strong><br>
          <span style="font-size:0.85rem;">‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô: ${schedule}</span>
        </li>
      `;
    }).join('');

    summaryEl.innerHTML = `
      üìö ‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏ó‡∏µ‡πà‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô:
      <ul style="margin:0.3rem 0 0 1.2rem; padding:0;">
        ${itemsHtml}
      </ul>
    `;
  }

  // ---------- 11) ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Apps Script ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ + ‡∏Ñ‡∏≠‡∏£‡πå‡∏™ ----------
  async function loadDashboardFromServer() {
    const params = new URLSearchParams({
      action: 'getMember',
      userId: userId,
      email: userEmail
    });

    try {
      const res  = await fetch(`${PROFILE_API_URL}?${params.toString()}`);
      const json = await res.json();
      console.log('member data:', json);

      if (json.status !== 'ok') {
        console.error('getMember error:', json);
        return;
      }

      const p = json.profile || {};

      // ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏à‡∏≤‡∏Å‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå enrollcourse/enrollCourse
      const enrollStr  = p.enrollCourse || p.enrollcourse || p.enrolledCourses || '';
      console.log('enrollStr from profile:', enrollStr);

      const enrollList = enrollStr
        .split(',')
        .map(s => s.trim())
        .filter(Boolean);

      let courses = [];
      if (enrollList.length > 0) {
        courses = enrollList.map(cid => {
          const conf = COURSE_CONFIG[cid] || {};
          return {
            courseId: cid,
            courseName: conf.name || cid,
            schedule: conf.schedule || '',
            status: p.status || ''
          };
        });
      }

      const fullName = ((p.firstName || '') + (p.lastName ? ' ' + p.lastName : '')).trim();

      const displayStudentName = document.getElementById('displayStudentName');
      const displayLevel       = document.getElementById('displayLevel');
      const displaySchool      = document.getElementById('displaySchool');
      const displayPhone       = document.getElementById('displayPhone');
      const displayParentPhone = document.getElementById('displayParentPhone');
      const welcomeStudentName = document.getElementById('welcomeStudentName');
      const welcomeLevel       = document.getElementById('welcomeLevel');
      const paymentStatusText  = document.getElementById('paymentStatusText');

      if (displayStudentName && fullName) displayStudentName.textContent = fullName;
      if (displayLevel && p.level)        displayLevel.textContent       = p.level;
      if (displaySchool)                  displaySchool.textContent      = p.school || '-';
      if (displayPhone)                   displayPhone.textContent       = p.phone || '-';
      if (displayParentPhone)             displayParentPhone.textContent = p.parentPhone || '-';
      if (welcomeStudentName && fullName) welcomeStudentName.textContent = fullName;
      if (welcomeLevel)                   welcomeLevel.textContent       = p.level || '';
      if (userNameDisplay && fullName)    userNameDisplay.textContent    = fullName;

      if (paymentStatusText) {
        if (p.status === 'PAID') {
          paymentStatusText.textContent = '‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß (PAID)';
        } else if (p.status) {
          paymentStatusText.textContent = '‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ' + p.status;
        } else {
          paymentStatusText.textContent = '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô';
        }
      }

      const dashboardBtn         = document.getElementById('dashboardBtn');
      const dashboardLockMessage = document.getElementById('dashboardLockMessage');

      const globalStatus = String(p.status || '').toUpperCase();
      const isPaidGlobal = (globalStatus === 'PAID' || globalStatus === '‡∏ä‡∏≥‡∏£‡∏∞‡πÅ‡∏•‡πâ‡∏ß');

      if (!isPaidGlobal) {
        if (dashboardBtn) {
          dashboardBtn.disabled = true;
          dashboardBtn.onclick  = null;
        }
        if (dashboardLockMessage) {
          dashboardLockMessage.textContent =
            '‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ñ‡∏≠‡∏£‡πå‡∏™ (‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏à‡∏≤‡∏Å‡∏Ñ‡∏£‡∏π/‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô)';
        }
      } else {
        if (dashboardBtn) {
          dashboardBtn.disabled = false;
          dashboardBtn.onclick  = () => {
            window.location.href = 'dashboard.html';
          };
        }
        if (dashboardLockMessage) {
          dashboardLockMessage.textContent =
            '‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤ Dashboard ‡πÑ‡∏î‡πâ';
        }
      }

      // ‡∏ß‡∏≤‡∏î‡∏Ñ‡∏≠‡∏£‡πå‡∏™ + ‡∏™‡∏£‡∏∏‡∏õ
      renderCourses(courses);
      updateCourseSummary(courses);

    } catch (err) {
      console.error('loadDashboardFromServer error:', err);
    }
  }

  // ---------- ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ï‡∏≠‡∏ô‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤ ----------
  loadProfileFromLocal();
  updateSummaryCounts([]);   // ‡∏ï‡∏≠‡∏ô‡πÅ‡∏£‡∏Å‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ data ‚Üí ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πá‡∏ô 0 ‡πÑ‡∏õ‡∏Å‡πà‡∏≠‡∏ô
  loadDashboardFromServer();
</script>


</body>
</html>
